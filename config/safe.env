# === SMART GUARD профиль ===
RESPONSE_MODE=json
LOG_LEVEL=INFO

# UX-надстройки (если у тебя используются)
ENABLE_FOLLOWUPS=true
ENABLE_SMART_FOLLOWUPS=true
ENABLE_EMPATHY=true
ENABLE_ENHANCED_EMPATHY=true
POSTPROCESS_STRIP_TEXTUAL_CTA=true
SUPPRESS_EMPATHY_CLOSER_WHEN_CTA=true

# --- Режим RAG ---
RAG_MODE=HYBRID_TIGHT
DISABLE_ALIAS_FASTPATH=true

# --- Hybrid-Tight ---
HYBRID_ENABLE=true
HYBRID_W_EMB=0.60
HYBRID_W_BM25=0.40
HYBRID_TOPK_EMB=6
HYBRID_TOPK_BM25=6
HYBRID_K=8
FUSION_METHOD=RRF
RRF_K=60

# --- Rerank ---
RERANK_ENABLE=true
RERANK_TOP_R=3

# --- Guard (чуть мягче + динамика) ---
GUARD_ENABLE=true
GUARD_DYNAMIC=true
GUARD_THRESHOLD=0.58
GUARD_SOFT_MIN=0.54
GUARD_MARGIN=0.06

# --- Multi-Query ---
MQ_ENABLE_CONDITIONAL=true
MQ_MIN_WORDS=5
MQ_MAX_VARIANTS=2
MQ_MAX_CANDIDATES=8
MQ_EXCLUDE_PATTERNS="больно|страшно|адрес|как добраться"

# --- Бусты/штрафы ---
BOOST_CONTACTS=0.10
BOOST_PRICES=0.08
LEN_PENALTY=0.03

# --- Flask ---
FLASK_ENV=production
FLASK_DEBUG=false
