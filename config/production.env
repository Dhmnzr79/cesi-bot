# === PROD (боевой профиль) ===
RESPONSE_MODE=json
LOG_LEVEL=INFO

# --- Режим RAG ---
RAG_MODE=HYBRID_TIGHT
DISABLE_ALIAS_FASTPATH=true   # не перепрыгиваем ретривер старым "fastpath"

# --- Hybrid-Tight ---
HYBRID_ENABLE=true
HYBRID_W_EMB=0.60
HYBRID_W_BM25=0.40
HYBRID_TOPK_EMB=6
HYBRID_TOPK_BM25=6
HYBRID_K=8
FUSION_METHOD=RRF
RRF_K=60

# --- Rerank ---
RERANK_ENABLE=true
RERANK_TOP_R=3

# --- Guard (строгий, без динамики) ---
GUARD_ENABLE=true
GUARD_DYNAMIC=false
GUARD_THRESHOLD=0.60
GUARD_SOFT_MIN=0.56
GUARD_MARGIN=0.07

# --- Multi-Query (только на длинных) ---
MQ_ENABLE_CONDITIONAL=true
MQ_MIN_WORDS=5
MQ_MAX_VARIANTS=2
MQ_MAX_CANDIDATES=8
MQ_EXCLUDE_PATTERNS="больно|страшно|адрес|как добраться"

# --- Бусты/штрафы ---
BOOST_CONTACTS=0.10
BOOST_PRICES=0.08
LEN_PENALTY=0.03

# --- Flask ---
FLASK_ENV=production
FLASK_DEBUG=false
